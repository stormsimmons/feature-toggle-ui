<div>
  <app-feature-toggle-details *ngIf="featureToggle" [featureToggle]="featureToggle"></app-feature-toggle-details>

  <mat-card *ngIf="featureToggle">
    <div>
      <mat-form-field>
        <mat-label>Environment</mat-label>
        <mat-select [(ngModel)]="selectedEnvironmentKey" (selectionChange)="onSelectionChangeEnvironmentKey()">
          <mat-option *ngFor="let environment of featureToggle.environments" [value]="environment.key">
            {{ environment.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div *ngIf="featureToggle && tenant" class="grey-section">
      <label>Use this link to check the state of your feature toggle.</label>
      <span>GET</span>
      <a
        href="{{
          [
            ENVIRONMENT.uri,
            tenant.key,
            'feature-toggle',
            featureToggle.key,
            'enabled',
            selectedEnvironment.key,
            'my-consumer'
          ].join('/')
        }}"
      >
        {{ ENVIRONMENT.uri }}/{{ tenant.key }}/feature-toggle/{{ featureToggle.key }}/enabled/{{
          selectedEnvironment.key
        }}/<span>my-consumer</span>
      </a>
    </div>

    <mat-list *ngIf="featureToggle">
      <mat-list-item>
        <b> Key </b>: &nbsp;
        <b>
          <u>{{ selectedEnvironment.key }}</u>
        </b>
      </mat-list-item>
      <mat-list-item> <b>Name</b>: {{ selectedEnvironment.name }} </mat-list-item>
      <mat-list-item>
        <mat-slide-toggle [(ngModel)]="selectedEnvironment.enabled" (change)="onChangeFeatureToggle()">
          Enabled
        </mat-slide-toggle>
      </mat-list-item>
      <mat-list-item>
        <mat-slide-toggle [(ngModel)]="selectedEnvironment.enabledForAll" (change)="onChangeFeatureToggle()">
          Enabled for All
        </mat-slide-toggle>
      </mat-list-item>
      <mat-list-item>
        <mat-slide-toggle [(ngModel)]="featureToggle.archived" (change)="onChangeFeatureToggle()">
          Archived
        </mat-slide-toggle>
      </mat-list-item>
      <mat-list-item *ngIf="!selectedEnvironment.enabledForAll" style="margin: 20px 0px">
        <app-feature-toggle-edit-consumers
          [consumers]="selectedEnvironment.consumers"
          (change)="onChangeFeatureToggleEditConsumers($event)"
        ></app-feature-toggle-edit-consumers>
      </mat-list-item>
    </mat-list>
  </mat-card>
</div>
